# PROMPTS.md

Документ содержит информацию о промптах, использованных при разработке проекта с помощью AI.

## Основной промпт для создания проекта

```
Соберите небольшое веб-приложение для приёма и обработки заявок в ремонтную службу.

Функционал (обязательный минимум):

Роли (упрощённо): диспетчер и мастер.

Авторизацию можно сделать простой: выбор пользователя на странице или логин по имени/паролю (сиды в БД).

Заявка (Request) должна иметь поля:
- clientName (обязательно)
- phone (обязательно)
- address (обязательно)
- problemText (обязательно)
- status (одно из): new | assigned | in_progress | done | canceled
- assignedTo (мастер, может быть пустым)
- createdAt, updatedAt

Страницы/экраны (обязательные):
1) Создание заявки - форма создания заявки (клиент/телефон/адрес/описание). После создания заявка имеет статус new.
2) Панель диспетчера - список заявок, фильтр по статусу, назначить мастера (статус assigned), отменить заявку (статус canceled)
3) Панель мастера - список заявок, назначенных на текущего мастера, действие "Взять в работу" (перевод assigned → in_progress), действие "Завершить" (перевод in_progress → done)

Обязательное условие (проверка "гонки"):
Действие "Взять в работу" должно быть безопасным при параллельных запросах: если два запроса пришли одновременно, заявка не должна "сломаться".
Корректное поведение: один запрос успешен, второй получает отказ (например, 409 Conflict) или понятный ответ, что заявка уже взята.

Требования к запуску:
- Docker Compose: docker compose up, приложение доступно по http://localhost:...
- База данных: можно SQLite или MySQL/Postgres

Что должно быть в репозитории:
- Исходники приложения
- Миграции БД
- Сиды (минимум: 1 диспетчер, 2 мастера, несколько заявок для проверки)
- README.md: как запустить проект, тестовые пользователи, как проверить "гонку"
- DECISIONS.md (5–7 пунктов): ключевые решения
- Минимум 2 автотеста
- PROMPTS.md (обязательно)
```

## Промпт для модульной архитектуры

```
Напиши код чтобы он был полностью модульным.
Ориентируйся на модель объектно-ориентированного программирования.
Переменные должны были вынесены в .env, создай example.
```

## Промпт для защиты от race condition

```
Реализуй защиту от race condition при взятии заявки в работу.
Используй транзакции и блокировки строк для предотвращения параллельного доступа.
При параллельных запросах один должен быть успешным, второй должен получить ошибку.
```

## Использованные инструменты AI

- **Cursor AI** - основной инструмент для генерации кода
- **GitHub Copilot** - автодополнение кода
- **ChatGPT** - консультации по архитектурным решениям

## Подход к разработке

1. **Итеративная разработка**: Код создавался пошагово, с проверкой каждого компонента
2. **Модульность**: Каждый модуль разрабатывался отдельно с чётким интерфейсом
3. **Тестирование**: Тесты писались параллельно с кодом
4. **Документация**: Документация создавалась по мере разработки

## Результат

Проект полностью соответствует ТЗ:
- ✅ Модульная архитектура
- ✅ Все требуемые страницы и функционал
- ✅ Защита от race condition
- ✅ Тесты и документация
- ✅ Docker Compose для запуска
